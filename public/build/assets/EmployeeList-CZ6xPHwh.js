import{r as a,b as l,j as e}from"./app-B0-9iUF2.js";import _ from"./EditEmployee-LXoGD1QO.js";import"./index.esm-mgHyA97L.js";const C=()=>{const[h,c]=a.useState([]),[n,u]=a.useState([]),[m,j]=a.useState([]),[g,i]=a.useState(!0),[d,y]=a.useState(null),[p,f]=a.useState(null),[b,x]=a.useState(!1),E=s=>{const t=n.find(r=>r.id===s.position_id),o=t?t.company_id:null;f({...s,company_id:o}),x(!0)};a.useEffect(()=>{i(!0),Promise.all([l.get("admin/employees"),l.get("api/positions"),l.get("api/companies")]).then(([s,t,o])=>{c(s.data),u(t.data),j(o.data),i(!1)}).catch(s=>{y("Error al cargar los datos"),i(!1)})},[]);const N=()=>{l.get("admin/employees").then(s=>c(s.data)).catch(s=>console.error("Error al actualizar la lista de empleados",s))};return g?e.jsx("span",{className:"flex my-auto mx-auto bg-primary loading loading-dots loading-lg w-2/4 h-screen"}):d?(console.log(d),e.jsx("div",{children:d})):e.jsxs("div",{className:"container__75__table",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Lista de Empleados"}),e.jsxs("div",{className:"overFlow",children:[" ",e.jsxs("table",{className:"employee__table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-xl",children:[e.jsx("th",{className:"px-4 py-2 w-2",children:"Nombre"}),e.jsx("th",{className:"px-4 py-2 w-2",children:"Fecha de Registro"}),e.jsx("th",{className:"px-4 py-2 w-2",children:"Puesto"}),e.jsx("th",{className:"px-4 py-2 w-2",children:"Acciones"})]})}),e.jsx("tbody",{children:h.map(s=>{const t=n.find(r=>r.id===s.position_id),o=t?m.find(r=>r.id===t.company_id):null;return e.jsxs("tr",{className:"hover",children:[e.jsx("td",{className:"border px-4 py-2 name-cell",children:s.first_name+" "+s.last_name_1}),e.jsx("td",{className:"border px-4 py-2",children:new Date(s.registered_at).toLocaleDateString()}),e.jsxs("td",{className:"border px-4 py-2",children:[t==null?void 0:t.name,e.jsx("br",{}),e.jsx("span",{className:"badge bg-primary text-white ",children:o==null?void 0:o.name})]}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("button",{onClick:()=>E(s),children:"Editar"})})]},s.id)})})]}),b&&p&&e.jsx(_,{employee:p,positions:n,companies:m,onClose:()=>{x(!1),N()}})]})]})};export{C as default};
