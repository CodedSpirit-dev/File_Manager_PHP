import{r as x,q as f,j as e,a as j,Y as M}from"./app-B7dVHGJe.js";import{G as u}from"./iconBase-C7JHrH5f.js";import{I as w}from"./index-G5qWkPXh.js";import{$ as P,a as E,w as H,r as a,M as y}from"./Toolbar-C5OONGRz.js";import{u as v,A as I}from"./AuthProvider-Dmx2arq7.js";import $ from"./EmployeeList-CvnWa8Xo.js";import V from"./CompanyList-R59mPqCb.js";import F from"./PositionList-C2ZiSgXV.js";import Z from"./Profile-C7jiEynm.js";import b from"./FileManager-BE4zo5un.js";import A from"./LogList-DwStDBRR.js";import{a as B}from"./portal-DCWQhBdt.js";import{K as S,_ as R,L as T}from"./use-server-handoff-complete-VWt0FVe2.js";import"./EditEmployee-CRqDUS29.js";import"./index.esm-DU-grLVq.js";import"./CreateEmployee-DZ6gHi1R.js";import"./CompanyBadge-C9lyum2Q.js";import"./EditCompany-BQo0Mpxk.js";import"./CreateCompany-DjUfnmHI.js";import"./companyApi-DsIxQnZ6.js";import"./CreatePosition-e_K8ZZ9_.js";import"./positionApi-DcnIzU7m.js";import"./EditPosition-JAU5QrJ9.js";import"./UpdatePasswordForm-CN_V83rQ.js";import"./Modal-C29SXoGj.js";import"./FileViewerModal-CUqtvsnY.js";import"./FileViewer-nhXWwro2.js";import"./fileManagerApi-euZL6sfS.js";import"./Breadcrumb-DWGLrVEJ.js";import"./LogToolbar-CFeTnBUV.js";import"./LogDetailsModal-BfunUCxW.js";import"./PermissionMapping-XFp8d1BL.js";let O="button";function G(i,o){var c;let l=B(),{disabled:t=l||!1,autoFocus:d=!1,...n}=i,{isFocusVisible:m,focusProps:s}=P({autoFocus:d}),{isHovered:p,hoverProps:h}=E({isDisabled:t}),{pressed:r,pressProps:_}=H({disabled:t}),N=R({ref:o,type:(c=n.type)!=null?c:"button",disabled:t||void 0,autoFocus:d},s,h,_),k=x.useMemo(()=>({disabled:t,hover:p,focus:m,active:r,autofocus:d}),[t,p,m,r,d]);return T()({ourProps:N,theirProps:n,slot:k,defaultTag:O,name:"Button"})}let U=S(G);function g(i){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2"},child:[]}]})(i)}function C(i){return u({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(i)}function L(i){return u({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M12,13 C14.209139,13 16,11.209139 16,9 C16,6.790861 14.209139,5 12,5 C9.790861,5 8,6.790861 8,9 C8,11.209139 9.790861,13 12,13 Z M6,22 L6,19 C6,15.6862915 8.6862915,13 12,13 C15.3137085,13 18,15.6862915 18,19 L18,22 M13,5 C13.4037285,3.33566165 15.0151447,2 17,2 C19.172216,2 20.98052,3.790861 21,6 C20.98052,8.209139 19.172216,10 17,10 L16,10 L17,10 C20.287544,10 23,12.6862915 23,16 L23,18 M11,5 C10.5962715,3.33566165 8.98485529,2 7,2 C4.82778404,2 3.01948003,3.790861 3,6 C3.01948003,8.209139 4.82778404,10 7,10 L8,10 L7,10 C3.71245602,10 1,12.6862915 1,16 L1,18"},child:[]}]})(i)}function D(i){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 2.9918C3 2.44405 3.44495 2 3.9934 2H20.0066C20.5552 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM19 11V4H5V11H19ZM19 13H5V20H19V13ZM9 6H15V8H9V6ZM9 15H15V17H9V15Z"},child:[]}]})(i)}function W(i){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M7 3C8.86384 3 10.4299 4.27477 10.874 6H19V8H10.874C10.4299 9.72523 8.86384 11 7 11C4.79086 11 3 9.20914 3 7C3 4.79086 4.79086 3 7 3ZM7 9C8.10457 9 9 8.10457 9 7C9 5.89543 8.10457 5 7 5C5.89543 5 5 5.89543 5 7C5 8.10457 5.89543 9 7 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M17 20C15.1362 20 13.5701 18.7252 13.126 17H5V15H13.126C13.5701 13.2748 15.1362 12 17 12C19.2091 12 21 13.7909 21 16C21 18.2091 19.2091 20 17 20ZM17 18C18.1046 18 19 17.1046 19 16C19 14.8954 18.1046 14 17 14C15.8954 14 15 14.8954 15 16C15 17.1046 15.8954 18 17 18Z",fill:"currentColor"},child:[]}]})(i)}const z=({renderComponent:i,activeComponent:o})=>{var m;const{hasPermission:c}=v(),{auth:l}=f().props,t=l.user;["can_create_companies","can_delete_companies","can_update_companies","can_create_positions","can_update_positions","can_delete_positions","can_create_users","can_delete_users","can_update_users","can_view_company_users","can_view_all_users","can_view_file_explorer"].some(s=>c(s));const n=s=>{i(s)};return e.jsxs(a,{as:"div",className:"relative inline-block text-left",children:[e.jsx("div",{children:e.jsxs(a.Button,{className:"btn btn-ghost nav__bar__button flex items-center",children:[e.jsx(W,{className:"mr-2"})," Panel de Administración"]})}),e.jsx(a.Items,{className:"absolute right-0 mt-2 w-56 origin-top-right bg-white border border-gray-200 divide-y divide-gray-100 rounded-md shadow-lg focus:outline-none z-20",children:e.jsxs("div",{className:"px-1 py-1 ",children:[e.jsx(a.Item,{children:({active:s})=>e.jsxs("button",{className:`${o==="Profile"?"bg-primary text-white cursor-not-allowed":s?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>n("Profile"),disabled:o==="Profile",children:[e.jsx(C,{className:"mr-2"})," Perfil"]})}),e.jsx(a.Item,{children:({active:s})=>e.jsxs("button",{className:`${o==="CompanyList"?"bg-primary text-white cursor-not-allowed":s?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>n("CompanyList"),disabled:o==="CompanyList",children:[e.jsx(w,{className:"mr-2"})," Empresas"]})}),e.jsx(a.Item,{children:({active:s})=>e.jsxs("button",{className:`${o==="PositionList"?"bg-primary text-white cursor-not-allowed":s?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>n("PositionList"),disabled:o==="PositionList",children:[e.jsx(y,{className:"mr-2"})," Puestos"]})}),e.jsx(a.Item,{children:({active:s})=>e.jsxs("button",{className:`${o==="EmployeeList"?"bg-primary text-white cursor-not-allowed":s?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>n("EmployeeList"),disabled:o==="EmployeeList",children:[e.jsx(L,{className:"mr-2"})," Usuarios"]})}),((m=t.position)==null?void 0:m.hierarchy_level)===0&&e.jsx(a.Item,{children:({active:s})=>e.jsxs("button",{className:`${o==="LogList"?"bg-primary text-white cursor-not-allowed":s?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>n("LogList"),disabled:o==="LogList",children:[e.jsx(g,{className:"mr-2"})," Logs"]})})]})})]})},q=()=>{const[i,o]=x.useState(300);x.useEffect(()=>{const t=()=>o(300);window.addEventListener("mousemove",t),window.addEventListener("keydown",t);const d=setInterval(()=>{o(n=>n<=1?(clearInterval(d),c(),0):n-1)},1e3);return()=>{clearInterval(d),window.removeEventListener("mousemove",t),window.removeEventListener("keydown",t)}},[]);const c=()=>{j.post("/logout").finally(()=>{window.location.href="/login"})},l=t=>{const d=Math.floor(t/60),n=t%60;return`${String(d).padStart(2,"0")}:${String(n).padStart(2,"0")}`};return e.jsx("div",{className:"text-gray-700",children:l(i)})},K=()=>{var h;v();const{auth:i}=f().props,o=i.user,[c,l]=x.useState(e.jsx(b,{})),[t,d]=x.useState("FileManager"),[n,m]=x.useState(!1),s=r=>{switch(d(r),r){case"Profile":l(e.jsx(Y,{}));break;case"FileManager":l(e.jsx(b,{}));break;case"EmployeeList":l(e.jsx($,{}));break;case"CompanyList":l(e.jsx(V,{}));break;case"PositionList":l(e.jsx(F,{}));break;case"LogList":l(e.jsx(A,{}));break;default:l(null)}},p=()=>{m(!0),j.post("/logout").finally(()=>{window.location.href="/login"})};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Explorador de archivos"}),e.jsxs("section",{className:"container mx-auto",children:[e.jsxs("nav",{className:"nav__bar rounded-lg flex items-center justify-between p-4",children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs(a,{as:"div",className:"relative inline-block text-left",children:[e.jsx("div",{children:e.jsx(a.Button,{className:"nav__bar__button transition-opacity hover:text-black",children:"Menú"})}),e.jsx(a.Items,{className:"absolute left-0 mt-2 w-56 origin-top-left bg-white border border-gray-200 divide-y divide-gray-100 rounded-md shadow-lg focus:outline-none z-20",children:e.jsxs("div",{className:"px-1 py-1 ",children:[e.jsx(a.Item,{children:({active:r})=>e.jsxs("button",{className:`${t==="FileManager"?"bg-primary text-white cursor-not-allowed":r?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>s("FileManager"),disabled:t==="FileManager",children:[e.jsx(g,{className:"mr-2"})," Explorador de Archivos"]})}),e.jsx(a.Item,{children:({active:r})=>e.jsxs("button",{className:`${t==="Profile"?"bg-primary text-white cursor-not-allowed":r?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>s("Profile"),disabled:t==="Profile",children:[e.jsx(C,{className:"mr-2"})," Perfil"]})}),e.jsx(a.Item,{children:({active:r})=>e.jsxs("button",{className:`${t==="CompanyList"?"bg-primary text-white cursor-not-allowed":r?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>s("CompanyList"),disabled:t==="CompanyList",children:[e.jsx(w,{className:"mr-2"})," Empresas"]})}),e.jsx(a.Item,{children:({active:r})=>e.jsxs("button",{className:`${t==="PositionList"?"bg-primary text-white cursor-not-allowed":r?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>s("PositionList"),disabled:t==="PositionList",children:[e.jsx(y,{className:"mr-2"})," Puestos"]})}),e.jsx(a.Item,{children:({active:r})=>e.jsxs("button",{className:`${t==="EmployeeList"?"bg-primary text-white cursor-not-allowed":r?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>s("EmployeeList"),disabled:t==="EmployeeList",children:[e.jsx(L,{className:"mr-2"})," Usuarios"]})}),((h=o.position)==null?void 0:h.hierarchy_level)===0&&e.jsx(a.Item,{children:({active:r})=>e.jsxs("button",{className:`${t==="LogList"?"bg-primary text-white cursor-not-allowed":r?"bg-info text-white":"text-gray-900"} group flex rounded-md items-center w-full px-2 py-2 text-sm`,onClick:()=>s("LogList"),disabled:t==="LogList",children:[e.jsx(D,{className:"mr-2"})," Logs"]})})]})})]})}),e.jsxs("div",{className:"hidden lg:flex space-x-4",children:[e.jsxs(U,{className:`btn btn-ghost nav__bar__button hover:text-black ${t==="FileManager"?"bg-primary text-white cursor-not-allowed":""}`,onClick:()=>s("FileManager"),disabled:t==="FileManager",children:[e.jsx(g,{className:"mr-2"})," Explorador de archivos"]}),e.jsx(z,{renderComponent:s,activeComponent:t})]}),e.jsx(q,{}),e.jsxs("div",{children:[e.jsx("button",{className:"nav__bar__button transition-opacity hover:text-black",onClick:()=>{const r=document.getElementById("modal_sesion_close");r==null||r.showModal()},children:"Cerrar sesión"}),e.jsx("dialog",{id:"modal_sesion_close",className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg text-center",children:"¿Estás seguro de cerrar sesión?"}),e.jsx("div",{className:"modal-action justify-center",children:e.jsxs("form",{method:"dialog",children:[e.jsx("button",{className:"btn",children:"No cerrar sesión"}),e.jsxs("button",{type:"button",className:"btn btn-active btn-primary m-3",onClick:p,children:[n?e.jsx("span",{className:"loading loading-spinner loading-xs mr-2"}):null,"Cerrar sesión"]})]})})]})})]})]}),e.jsx("div",{className:"mt-4",children:c})]})]})},Y=()=>{const{auth:i}=f().props;return e.jsx(Z,{mustVerifyEmail:!1,status:"",auth:i})},Pe=()=>e.jsx(I,{children:e.jsx(K,{})});export{Pe as default};
