import{W as N,r as i,b as o,j as e,Y as b}from"./app-DG--M_j1.js";function C({}){const{data:s,setData:n,post:m,processing:d,reset:g}=N({first_name:"",last_name_1:"",last_name_2:"",username:"",password:"",hierarchy_level:"",password_confirmation:"",position_id:"",company_id:""}),[_,c]=i.useState([]),[p,u]=i.useState([]),[h,x]=i.useState([]),[t,v]=i.useState({first_name:"",last_name_1:"",last_name_2:"",username:"",position_id:"",company_id:"",hierarchy_level:"",password:"",password_confirmation:""});i.useEffect(()=>{o.get("api/companies").then(a=>{c(a.data)}).catch(a=>{console.error("Error al cargar las empresas",a)}),o.get("api/positions").then(a=>{u(a.data)}).catch(a=>{console.error("Error al cargar los puestos",a)}),o.get("api/hierarchylevels").then(a=>{x(a.data)}).catch(a=>{console.error("Error al cargar los niveles de autorización",a)})},[]);const j=a=>{a.preventDefault();let r={first_name:"",last_name_1:"",last_name_2:"",username:"",company_id:"",position_id:"",hierarchy_level:"",password:"",password_confirmation:""};const f=parseInt(s.position_id,10),y=parseInt(s.company_id,10);if(s.first_name||(r.first_name="El nombre es requerido"),s.last_name_1||(r.last_name_1="El apellido paterno es requerido"),s.last_name_2||(r.last_name_2="El apellido materno es requerido"),s.username||(r.username="El nombre de usuario es requerido"),isNaN(f)&&(r.position_id="El puesto no debe estar vacío"),isNaN(y)&&(r.company_id="Debes seleccionar la empresa"),s.hierarchy_level||(r.hierarchy_level="Debes seleccionar el nivel de autorización"),s.password||(r.password="La contraseña es requerida"),s.password_confirmation||(r.password_confirmation="La confirmación de la contraseña es requerida"),Object.values(r).every(l=>l==="")){const l={...s,first_name:s.first_name.toUpperCase(),last_name_1:s.last_name_1.toUpperCase(),last_name_2:s.last_name_2.toUpperCase(),username:s.username.toUpperCase()};console.log("Data to send: ",l),m(route("admin.employees.store"),{data:l})}else v(r)};return e.jsxs("div",{className:"container__25",children:[e.jsx(b,{title:"Registro de nuevos empleados"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mt-10 input__label",htmlFor:"first_name",children:["Nombre(s)",e.jsx("input",{id:"first_name",name:"first_name",value:s.first_name,className:"input__data__entry",autoComplete:"given-name",onChange:a=>n("first_name",a.target.value),required:!0})]}),t.first_name&&e.jsx("p",{className:"mt-2 text-red-600",children:t.first_name})]}),e.jsxs("div",{className:"mt-4 input__label",children:[e.jsxs("label",{htmlFor:"last_name_1",children:["Apellido paterno",e.jsx("input",{id:"last_name_1",name:"last_name_1",value:s.last_name_1,className:"input__data__entry",autoComplete:"family-name",onChange:a=>n("last_name_1",a.target.value),required:!0})]}),t.last_name_1&&e.jsx("p",{className:"mt-2 text-red-600",children:t.last_name_1})]}),e.jsxs("div",{className:"mt-4 input__label",children:[e.jsxs("label",{htmlFor:"last_name_2",children:["Apellido materno",e.jsx("input",{id:"last_name_2",name:"last_name_2",value:s.last_name_2,className:"input__data__entry",autoComplete:"family-name",onChange:a=>n("last_name_2",a.target.value),required:!0})]}),t.last_name_2&&e.jsx("p",{className:"mt-2 text-red-600",children:t.last_name_2})]}),e.jsxs("div",{className:"mt-4 input__label",children:[e.jsxs("label",{htmlFor:"username",children:["Nombre de usuario (CURP)",e.jsx("input",{id:"username",name:"username",value:s.username,className:"input__data__entry",maxLength:18,onChange:a=>n("username",a.target.value),required:!0})]}),t.username&&e.jsx("p",{className:"mt-2 text-red-600",children:t.username})]}),e.jsxs("div",{className:"mt-4 input__label",children:[e.jsxs("label",{htmlFor:"company_id",children:["Nombre de la empresa",e.jsxs("select",{id:"company_id",name:"company_id",value:s.company_id,className:"input__data__entry",onChange:a=>n("company_id",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccione una empresa"}),_.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),t.company_id&&e.jsx("p",{className:"mt-2 text-red-600",children:t.company_id})]}),e.jsxs("div",{className:"mt-4 input__label",children:[e.jsxs("label",{htmlFor:"position_id",children:["Nombre del puesto",e.jsxs("select",{id:"position_id",name:"position_id",value:s.position_id,className:"input__data__entry",onChange:a=>n("position_id",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un puesto"}),p.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),t.position_id&&e.jsx("p",{className:"mt-2 text-red-600",children:t.position_id})]}),e.jsxs("div",{className:"mt-4 input__label",children:[e.jsxs("label",{htmlFor:"hierarchy_level",children:["Nivel de autorización",e.jsxs("select",{id:"hierarchy_level",name:"hierarchy_level",value:s.hierarchy_level,className:"input__data__entry",onChange:a=>n("hierarchy_level",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un nivel de autorización"}),h.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),t.hierarchy_level&&e.jsx("p",{className:"mt-2 text-red-600",children:t.hierarchy_level})]}),e.jsxs("div",{className:"mt-4 input__label",children:[e.jsxs("label",{htmlFor:"password",children:["Contraseña",e.jsx("input",{id:"password",type:"password",name:"password",value:s.password,className:"input__data__entry",autoComplete:"new-password",onChange:a=>n("password",a.target.value),required:!0})]}),t.password&&e.jsx("p",{className:"mt-2 text-red-600",children:t.password})]}),e.jsxs("div",{className:"mt-4 input__label",children:[e.jsxs("label",{htmlFor:"password_confirmation",children:["Confirmar contraseña",e.jsx("input",{id:"password_confirmation",type:"password",name:"password_confirmation",value:s.password_confirmation,className:"input__data__entry",autoComplete:"new-password",onChange:a=>n("password_confirmation",a.target.value),required:!0})]}),t.password_confirmation&&e.jsx("p",{className:"mt-2 text-red-600",children:t.password_confirmation})]}),e.jsx("div",{className:"mt-4 flex items-center justify-end",children:e.jsx("button",{className:"btn btn-success",disabled:d,children:"Registrar empleado"})})]})]})}export{C as default};
