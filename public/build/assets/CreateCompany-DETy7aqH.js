import{r as m,j as e,Y as g,b as _}from"./app-8uSU3nsv.js";import{u as N,C as f}from"./index.esm-CdDsjI3T.js";function v(){const{control:d,handleSubmit:n,formState:{errors:t,isValid:i},reset:u}=N({mode:"onChange",defaultValues:{name:""}}),[x,p]=m.useState(""),[h,r]=m.useState(""),o=s=>{_.post(route("api.companies.store"),s).then(()=>{p("La empresa ha sido registrada exitosamente."),r(""),b(),u()}).catch(a=>{var c;((c=a.response)==null?void 0:c.status)===450?r("El nombre de la empresa ya estÃ¡ en uso."):r("Hubo un error al registrar la empresa."),j()})},l=()=>{const s=document.getElementById("modal_company_success"),a=document.getElementById("modal_company_error");s==null||s.close(),a==null||a.close()},b=()=>{const s=document.getElementById("modal_company_success");s==null||s.showModal()},j=()=>{const s=document.getElementById("modal_company_error");s==null||s.showModal()};return e.jsxs("div",{className:"container__25 w-full",children:[e.jsx(g,{title:"Registro de nuevas empresas"}),e.jsxs("form",{onSubmit:n(o),children:[e.jsx("h1",{className:"text-2xl text-center font-bold my-4",children:"Registro de nuevas empresas"}),e.jsxs("div",{className:"mt-4 input__data__entry",children:[e.jsx(f,{name:"name",control:d,rules:{required:"El nombre es obligatorio",minLength:{value:3,message:"El nombre debe tener al menos 3 caracteres"},pattern:{value:/^[a-zA-Z0-9\s]+$/,message:"El nombre no debe contener caracteres especiales"}},render:({field:s})=>e.jsx("input",{...s,className:`input__data__entry w-full ${t.name?"border-red-600":""}`,placeholder:"Nombre de la empresa"})}),t.name&&e.jsx("p",{className:"text-red-600",children:t.name.message})]}),e.jsx("div",{className:"mt-4 flex items-center justify-end",children:e.jsx("button",{className:"btn btn-block",type:"button",onClick:n(o),disabled:!i,children:"Registrar empresa"})})]}),e.jsx("dialog",{id:"modal_company_success",className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg text-center",children:"Registro de empresa"}),e.jsx("h3",{className:"text-center",children:x}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{className:"btn btn-info",onClick:l,children:"Aceptar"})})]})}),e.jsx("dialog",{id:"modal_company_error",className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h1",{className:"font-bold text-lg text-center",children:"Error al registrar empresa"}),e.jsx("h2",{className:"text-center text-red-600",children:h}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{className:"btn btn-info",onClick:l,children:"Cerrar"})})]})})]})}export{v as default};
