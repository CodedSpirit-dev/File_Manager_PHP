import{r as a,j as e,Y as g,b as y}from"./app-z3H6Ewxy.js";import{u as _,C as v}from"./index.esm-Cu-aZXlf.js";function C(){const{control:i,handleSubmit:o,formState:{errors:r,isValid:x},reset:u}=_({mode:"onChange",defaultValues:{name:""}}),[c,p]=a.useState(""),[h,n]=a.useState(""),[b,j]=a.useState(!1),[N,f]=a.useState(!1),m=s=>{y.post("/admin/companies/store",s).then(()=>{p("La empresa ha sido registrada exitosamente."),n(""),j(!0),u()}).catch(t=>{var d;((d=t.response)==null?void 0:d.status)===450?n("El nombre de la empresa ya estÃ¡ en uso."):n("Hubo un error al registrar la empresa."),f(!0)})},l=()=>{const s=document.getElementById("modal_company_success"),t=document.getElementById("modal_company_error");s==null||s.close(),t==null||t.close()};return e.jsxs("div",{className:"container__25 w-full",children:[e.jsx(g,{title:"Registro de nuevas empresas"}),e.jsxs("form",{onSubmit:o(m),children:[e.jsx("h1",{className:"text-2xl text-center font-bold my-4",children:"Registro de nuevas empresas"}),e.jsxs("div",{className:"mt-4 input__data__entry",children:[e.jsx(v,{name:"name",control:i,rules:{required:"El nombre es obligatorio",minLength:{value:3,message:"El nombre debe tener al menos 3 caracteres"},pattern:{value:/^[a-zA-Z0-9\s]+$/,message:"El nombre no debe contener caracteres especiales"}},render:({field:s})=>e.jsx("input",{...s,className:`input__data__entry w-full ${r.name?"border-red-600":""}`,placeholder:"Nombre de la empresa"})}),r.name&&e.jsx("p",{className:"text-red-600",children:r.name.message})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end",children:[e.jsx("button",{className:"btn btn-block",type:"button",onClick:o(m),disabled:!x,children:"Registrar empresa"}),e.jsx("dialog",{id:"modal_company_success",className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg text-center",children:"Registro de empresa"}),e.jsx("h3",{className:"text-center",children:c}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{type:"button",className:"btn btn-info",onClick:l,children:"Aceptar"})})]})})]})]}),b&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg text-center",children:"Registro de empresa"}),e.jsx("h3",{className:"text-center",children:c}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{type:"button",className:"btn btn-info",onClick:l,children:"Aceptar"})})]})}),N&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h1",{className:"font-bold text-lg text-center",children:"Error al registrar empresa"}),e.jsx("h2",{className:"text-center text-red-600",children:h}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{className:"btn btn-info",onClick:l,children:"Cerrar"})})]})})]})}export{C as default};
