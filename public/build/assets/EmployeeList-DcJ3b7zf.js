import{r as a,b as i,j as e}from"./app-WTmYr8Aw.js";import S from"./EditEmployee-BJoOLwv3.js";import"./index.esm-wXNwuEEE.js";const D=()=>{const[h,c]=a.useState([]),[l,u]=a.useState([]),[d,b]=a.useState([]),[j,o]=a.useState(!0),[m,y]=a.useState(null),[x,f]=a.useState(null),[g,p]=a.useState(!1),N=t=>{const s=l.find(r=>r.id===t.position_id),n=s?s.company_id:null;f({...t,company_id:n}),p(!0)};a.useEffect(()=>{o(!0),Promise.all([i.get("admin/employees"),i.get("api/positions"),i.get("admin/companies")]).then(([t,s,n])=>{c(t.data),u(s.data),b(n.data),o(!1)}).catch(t=>{y("Error al cargar los datos"),o(!1)})},[]);const E=()=>{i.get("admin/employees").then(t=>c(t.data)).catch(t=>console.error("Error al actualizar la lista de empleados",t))},_=t=>{alert(`Funcionalidad de eliminación para ${t.first_name} ${t.last_name_1} está pendiente.`)};return j?e.jsx("div",{className:"flex justify-center items-center h-screen bg-base-100",children:e.jsx("span",{className:"loading loading-dots loading-lg text-primary"})}):m?e.jsx("div",{className:"text-center text-error",children:m}):e.jsxs("div",{className:"container mx-auto px-4 py-8 bg-base-100",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-primary",children:"Lista de Empleados"}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"table w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-primary-content",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nombre"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Fecha de Registro"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Último Inicio de Sesión"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Puesto"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Acciones"})]})}),e.jsx("tbody",{children:h.map(t=>{const s=l.find(r=>r.id===t.position_id),n=s?d.find(r=>r.id===s.company_id):null;return e.jsxs("tr",{className:"hover:bg-base-200",children:[e.jsxs("td",{className:"border px-4 py-2 text-sm text-base-content truncate",children:[t.first_name," ",t.last_name_1]}),e.jsx("td",{className:"border px-4 py-2 text-sm text-base-content",children:new Date(t.registered_at).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})}),e.jsx("td",{className:"border px-4 py-2 text-sm text-base-content",children:t.last_login_at?new Date(t.last_login_at).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"No registrado"}),e.jsxs("td",{className:"border px-4 py-2 text-sm text-base-content",children:[s==null?void 0:s.name,e.jsx("br",{}),n&&e.jsx("span",{className:"mt-1 inline-block bg-secondary text-secondary-content text-xs px-2 py-1 rounded",children:n.name})]}),e.jsx("td",{className:"border px-4 py-2 text-sm text-base-content",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{onClick:()=>N(t),className:"btn btn-primary btn-sm",children:"Editar"}),e.jsx("button",{onClick:()=>_(t),className:"btn btn-error btn-sm text-base-100",children:"Eliminar"})]})})]},t.id)})})]}),g&&x&&e.jsx(S,{employee:x,positions:l,companies:d,onClose:()=>{p(!1),E()}})]})]})};export{D as default};
