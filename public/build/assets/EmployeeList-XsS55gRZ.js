import{r as a,b as l,j as e}from"./app-C0SJH87f.js";import _ from"./EditEmployee-BAV91x7D.js";import"./index.esm-C2efHDSm.js";const C=()=>{const[h,d]=a.useState([]),[o,u]=a.useState([]),[m,y]=a.useState([]),[g,i]=a.useState(!0),[c,f]=a.useState(null),[x,j]=a.useState(null),[b,p]=a.useState(!1),N=t=>{const s=o.find(n=>n.id===t.position_id),r=s?s.company_id:null;j({...t,company_id:r}),p(!0)};a.useEffect(()=>{i(!0),Promise.all([l.get("admin/employees"),l.get("api/positions"),l.get("admin/companies")]).then(([t,s,r])=>{d(t.data),u(s.data),y(r.data),i(!1)}).catch(t=>{f("Error al cargar los datos"),i(!1)})},[]);const E=()=>{l.get("admin/employees").then(t=>d(t.data)).catch(t=>console.error("Error al actualizar la lista de empleados",t))};return g?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("span",{className:"loading loading-dots loading-lg text-primary"})}):c?(console.log(c),e.jsx("div",{className:"text-center text-red-500",children:c})):e.jsxs("div",{className:"container__75__table",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Lista de Empleados"}),e.jsxs("div",{className:"overFlow",children:[" ",e.jsxs("table",{className:"employee__table w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Nombre"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Fecha de Registro"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Puesto"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Acciones"})]})}),e.jsx("tbody",{children:h.map(t=>{const s=o.find(n=>n.id===t.position_id),r=s?m.find(n=>n.id===s.company_id):null;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"border px-4 py-2 text-sm text-gray-900 truncate",children:[t.first_name," ",t.last_name_1]}),e.jsx("td",{className:"border px-4 py-2 text-sm text-gray-900",children:new Date(t.registered_at).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})}),e.jsxs("td",{className:"border px-4 py-2 text-sm text-gray-900",children:[s==null?void 0:s.name,e.jsx("br",{}),r&&e.jsx("span",{className:"ml-2 inline-block bg-blue-500 text-white text-xs px-2 py-1 rounded",children:r.name})]}),e.jsx("td",{className:"border px-4 py-2 text-sm text-gray-900",children:e.jsx("button",{onClick:()=>N(t),className:"btn btn-primary",children:"Editar"})})]},t.id)})})]}),b&&x&&e.jsx(_,{employee:x,positions:o,companies:m,onClose:()=>{p(!1),E()}})]})]})};export{C as default};
