import{r as s,q as A,a as _,j as g}from"./app-B2Pg_CF4.js";const i={can_create_companies:!1,can_delete_companies:!1,can_update_companies:!1,can_create_positions:!1,can_update_positions:!1,can_delete_positions:!1,can_create_users:!1,can_delete_users:!1,can_update_users:!1,can_view_company_users:!1,can_view_all_users:!1,can_view_file_explorer:!1,can_open_files:!1,can_upload_files_and_folders:!1,can_create_folders:!1,can_download_files_and_folders:!1,can_copy_files:!1,can_move_files:!1,can_rename_files_and_folders:!1,can_delete_files_and_folders:!1},u=s.createContext({user:null,permissions:i,hierarchyLevel:null,companyName:null,redirectPath:null,hasPermission:()=>!1,refreshPermissions:()=>{}}),S=({children:t})=>{const{auth:o}=A().props,[f,d]=s.useState(o.user||null),[c,l]=s.useState(i),[m,p]=s.useState(null),[h,y]=s.useState(null),[P,v]=s.useState(null);s.useEffect(()=>{var a;d(o.user||null);const e=((a=o.user)==null?void 0:a.permissions)||[],r={...i};e.forEach(n=>{n in r&&(r[n]=!0)}),l(r),x()},[o.user]);const x=async()=>{try{const e=await _.get("/filemanager/hierarchy-company");p(e.data.hierarchy_level),y(e.data.company_name),v(e.data.redirect_path)}catch(e){console.error("Error fetching hierarchy and company information",e)}},w=()=>{_.get("/api/permissions").then(e=>{const r=e.data.permissions||[],a={...i};r.forEach(n=>{n in a&&(a[n]=!0)}),l(a)}).catch(e=>{console.error("Error fetching user permissions",e)})},E=e=>c[e];return g.jsx(u.Provider,{value:{user:f,permissions:c,hierarchyLevel:m,companyName:h,redirectPath:P,hasPermission:E,refreshPermissions:w},children:t})},j=()=>{const t=s.useContext(u);if(!t)throw new Error("useAuth debe usarse dentro de un AuthProvider");return t};export{S as A,j as u};
