import{r as l,j as e,a as y}from"./app-B2Pg_CF4.js";const R=({company:m,onClose:r})=>{const[n,b]=l.useState(m.name),[a,o]=l.useState(!1),[j,u]=l.useState(null),[p,N]=l.useState(null),c=l.useRef(null),d=l.useRef(null),i=l.useRef(null),f=async()=>{var s,x,h;o(!0),(s=c.current)==null||s.close();try{await y.put(`admin/companies/${m.id}`,{name:n}),o(!1),N("La empresa ha sido actualizada exitosamente."),(x=d.current)==null||x.showModal()}catch(t){if(o(!1),t.response&&t.response.data&&t.response.data.errors){const C=t.response.data.errors,M=Object.values(C).flat().join(" ");u(M)}else u("Error al actualizar la empresa.");(h=i.current)==null||h.showModal()}},g=()=>{var s;(s=d.current)==null||s.close(),r(!0)},v=()=>{var s;(s=i.current)==null||s.close(),r(!1)},E=()=>{r(!1)};return e.jsxs("div",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Editar Empresa"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Nombre de la Empresa"})}),e.jsx("input",{type:"text",value:n,onChange:s=>b(s.target.value),className:"input input-bordered w-full",disabled:a})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:E,className:"btn-cancel",disabled:a,children:"Cancelar"}),e.jsx("button",{onClick:()=>{var s;return(s=c.current)==null?void 0:s.showModal()},className:`btn-accept ${a?"loading":""}`,disabled:a,children:a?"":"Guardar"})]})]}),e.jsx("dialog",{ref:c,id:"modal_company_confirm",className:"modal modal-bottom sm:modal-middle",children:e.jsxs("div",{className:"modal-box",children:[e.jsxs("h4",{className:"font-bold text-center",children:["¿Estás seguro de actualizar la empresa ",e.jsx("b",{children:n}),"?"]}),e.jsxs("div",{className:"modal-action justify-center",children:[e.jsx("button",{className:"btn-cancel",onClick:()=>{var s;return(s=c.current)==null?void 0:s.close()},disabled:a,children:"No, cancelar"}),e.jsx("button",{className:"btn-accept",onClick:f,disabled:a,children:a?e.jsx("span",{className:"loading loading-spinner"}):"Sí, actualizar empresa"})]})]})}),e.jsx("dialog",{ref:d,id:"modal_company_success",className:"modal modal-bottom sm:modal-middle",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-center",children:"Actualización de Empresa"}),e.jsx("p",{className:"text-center text-success",children:p}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{type:"button",className:"btn btn-info",onClick:g,children:"Aceptar"})})]})}),e.jsx("dialog",{ref:i,id:"modal_company_error",className:"modal modal-bottom sm:modal-middle",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h4",{className:"font-bold text-center",children:"Error al Actualizar Empresa"}),e.jsx("p",{className:"text-center text-error",children:j}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{className:"btn-accept",onClick:v,children:"Cerrar"})})]})})]})};export{R as default};
