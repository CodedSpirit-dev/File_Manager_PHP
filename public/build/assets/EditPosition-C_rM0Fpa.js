import{r as a,j as e,b as k}from"./app-CaPX-28s.js";import{u as z,C as R}from"./index.esm-B8nDuB3b.js";const P=({position:n,onClose:d})=>{const{control:N,handleSubmit:i,formState:{errors:m,isValid:g}}=z({mode:"onChange",defaultValues:{name:n.name}}),[y,u]=a.useState(""),[C,o]=a.useState(""),[t,x]=a.useState(!1),l=a.useRef(null),r=a.useRef(null),c=a.useRef(null),h=async s=>{var b,j,p,f;x(!0);try{await k.put(`/admin/positions/${n.id}`,s),u("El puesto ha sido actualizado exitosamente."),d(!0),(b=l.current)==null||b.close(),(j=r.current)==null||j.showModal()}catch(_){((p=_.response)==null?void 0:p.status)===480?o("La compañía ya tiene un puesto con el mismo nombre."):o("Hubo un error al actualizar el puesto."),(f=c.current)==null||f.showModal()}finally{x(!1)}},M=()=>{var s;(s=l.current)==null||s.showModal()},v=()=>{i(h)()},E=()=>{var s;u(""),(s=r.current)==null||s.close()},S=()=>{var s;o(""),(s=c.current)==null||s.close()};return e.jsxs("div",{className:"modal-box",children:[e.jsxs("form",{onSubmit:i(h),children:[e.jsx("h1",{className:"text-2xl text-center font-bold my-4",children:"Editar Puesto"}),e.jsx("div",{children:e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"input__data__entry",htmlFor:"name",children:[e.jsx(R,{name:"name",control:N,rules:{required:"El nombre del puesto es obligatorio",minLength:{value:3,message:"El nombre debe tener al menos 3 caracteres"}},render:({field:s})=>e.jsx("input",{...s,placeholder:"Nombre del puesto",id:"name",className:"input__data__entry w-full"})}),m.name&&e.jsx("p",{className:"text-red-600",children:m.name.message})]})})}),e.jsxs("div",{className:"mt-6 flex items-center justify-end space-x-4",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:M,disabled:!g||t,children:t?e.jsx("span",{className:"loading loading-spinner"}):"Actualizar puesto"})]})]}),e.jsx("dialog",{ref:l,className:"modal modal-bottom sm:modal-middle",children:e.jsxs("div",{className:"modal-box",children:[e.jsxs("h4",{className:"font-bold text-center",children:["¿Estás seguro de actualizar el puesto ",e.jsx("b",{children:n.name}),"?"]}),e.jsxs("div",{className:"modal-action justify-center",children:[e.jsx("button",{className:"btn-cancel",onClick:()=>{var s;return(s=l.current)==null?void 0:s.close()},disabled:t,children:"No, cancelar"}),e.jsx("button",{className:"btn-accept",onClick:v,disabled:t,children:t?e.jsx("span",{className:"loading loading-spinner"}):"Sí, actualizar puesto"})]})]})}),e.jsx("dialog",{ref:r,className:"modal modal-bottom sm:modal-middle",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-center",children:"Actualización de Puesto"}),e.jsx("p",{className:"text-center text-green-600",children:y}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{type:"button",className:"btn btn-info",onClick:E,children:"Aceptar"})})]})}),e.jsx("dialog",{ref:c,className:"modal modal-bottom sm:modal-middle",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h4",{className:"font-bold text-center",children:"Error al Actualizar Puesto"}),e.jsx("p",{className:"text-center text-error",children:C}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{className:"btn btn-error",onClick:S,children:"Cerrar"})})]})})]})};export{P as default};
