import{r as s,j as e,Y as N,b as v}from"./app-B0-9iUF2.js";import{u as E,C as S}from"./index.esm-mgHyA97L.js";function C(){const{control:d,handleSubmit:n,formState:{errors:a,isValid:u},reset:x}=E({mode:"onChange",defaultValues:{name:""}}),[b,p]=s.useState(""),[h,t]=s.useState(""),[j,l]=s.useState(!1),[f,o]=s.useState(!1),c=r=>{v.post("/admin/companies/store",r).then(()=>{p("La empresa ha sido registrada exitosamente."),t(""),l(!0),x()}).catch(g=>{var i;((i=g.response)==null?void 0:i.status)===450?t("El nombre de la empresa ya está en uso."):t("Hubo un error al registrar la empresa."),o(!0)})},m=()=>{l(!1),o(!1)};return e.jsxs("div",{className:"container__25 w-full",children:[e.jsx(N,{title:"Registro de nuevas empresas"}),e.jsxs("form",{onSubmit:n(c),children:[e.jsx("h1",{className:"text-2xl text-center font-bold my-4",children:"Registro de nuevas empresas"}),e.jsxs("div",{className:"mt-4 input__data__entry",children:[e.jsx(S,{name:"name",control:d,rules:{required:"El nombre es obligatorio",minLength:{value:3,message:"El nombre debe tener al menos 3 caracteres"},maxLength:{value:50,message:"El nombre no debe tener más de 50 caracteres"},pattern:{value:/^[a-zA-Z0-9\s]+$/,message:"El nombre no debe contener caracteres especiales"}},render:({field:r})=>e.jsx("input",{...r,className:`input__data__entry w-full ${a.name?"border-red-600":""}`,placeholder:"Nombre de la empresa"})}),a.name&&e.jsx("p",{className:"text-red-600",children:a.name.message})]}),e.jsx("div",{className:"mt-4 flex items-center justify-end",children:e.jsx("button",{className:"btn btn-block",type:"button",onClick:n(c),disabled:!u,children:"Registrar empresa"})})]}),j&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg text-center",children:"Registro de empresa"}),e.jsx("h3",{className:"text-center",children:b}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{type:"button",className:"btn btn-info",onClick:m,children:"Aceptar"})})]})}),f&&e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h1",{className:"font-bold text-lg text-center",children:"Error al registrar empresa"}),e.jsx("h2",{className:"text-center text-red-600",children:h}),e.jsx("div",{className:"modal-action justify-center",children:e.jsx("button",{className:"btn btn-info",onClick:m,children:"Cerrar"})})]})})]})}export{C as default};
