import{R as Y,r as l,q as H,j as s,Y as z,b as X}from"./app-_Pg98rCg.js";import q from"./CreateEmployee-CceE1jpo.js";import J from"./EmployeeList-D_jbzwUA.js";import D from"./Profile-D4-c-ZWM.js";import Q from"./CreateCompany-DO7t2xnc.js";import Z from"./CreatePosition-CXBeRtYf.js";import ee from"./FileManager-DcoWvSic.js";import{u as te,a as ne}from"./disabled-6pUwg5ub.js";import{p as re,o as N,K as oe,_ as se,L as ie}from"./render-D9Dk2R3i.js";import"./index.esm-6mohFjuM.js";import"./EditEmployee-DXP9r6Dy.js";import"./UpdatePasswordForm-DbbLdzQv.js";import"./Toolbar--o2lxdTl.js";import"./iconBase-Bjuf4kCX.js";import"./Modal-M7FKZ9ck.js";import"./FileViewer-CKM9glfK.js";import"./api-Dlm5FLdH.js";import"./Breadcrumb-Bhpa7NpU.js";const I=typeof document<"u"?Y.useLayoutEffect:()=>{};function ae(e){const n=l.useRef(null);return I(()=>{n.current=e},[e]),l.useCallback((...t)=>{const r=n.current;return r==null?void 0:r(...t)},[])}const w=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},$=e=>e&&"window"in e&&e.window===e?e:w(e).defaultView||window;function ce(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function ue(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function A(e){let n=null;return()=>(n==null&&(n=e()),n)}const le=A(function(){return ue(/^Mac/i)}),de=A(function(){return ce(/Android/i)});function fe(e){return e.mozInputSource===0&&e.isTrusted?!0:de()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}class ve{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function W(e){let n=l.useRef({isFocused:!1,observer:null});I(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=ae(r=>{e==null||e(r)});return l.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,i=c=>{n.current.isFocused=!1,o.disabled&&t(new ve("blur",c)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",i,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var c;(c=n.current.observer)===null||c===void 0||c.disconnect();let a=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function pe(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const i=l.useCallback(d=>{if(d.target===d.currentTarget)return r&&r(d),o&&o(!1),!0},[r,o]),c=W(i),a=l.useCallback(d=>{const f=w(d.target);d.target===d.currentTarget&&f.activeElement===d.target&&(t&&t(d),o&&o(!0),c(d))},[o,t,c]);return{focusProps:{onFocus:!n&&(t||o||r)?a:void 0,onBlur:!n&&(r||o)?i:void 0}}}let y=null,_=new Set,E=new Map,x=!1,C=!1;const me={Tab:!0,Escape:!0};function M(e,n){for(let t of _)t(e,n)}function be(e){return!(e.metaKey||!le()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function j(e){x=!0,be(e)&&(y="keyboard",M("keyboard",e))}function p(e){y="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(x=!0,M("pointer",e))}function B(e){fe(e)&&(x=!0,y="virtual")}function R(e){e.target===window||e.target===document||(!x&&!C&&(y="virtual",M("virtual",e)),x=!1,C=!1)}function V(){x=!1,C=!0}function k(e){if(typeof window>"u"||E.get($(e)))return;const n=$(e),t=w(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){x=!0,r.apply(this,arguments)},t.addEventListener("keydown",j,!0),t.addEventListener("keyup",j,!0),t.addEventListener("click",B,!0),n.addEventListener("focus",R,!0),n.addEventListener("blur",V,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",p,!0),t.addEventListener("pointermove",p,!0),t.addEventListener("pointerup",p,!0)):(t.addEventListener("mousedown",p,!0),t.addEventListener("mousemove",p,!0),t.addEventListener("mouseup",p,!0)),n.addEventListener("beforeunload",()=>{K(e)},{once:!0}),E.set(n,{focus:r})}const K=(e,n)=>{const t=$(e),r=w(e);n&&r.removeEventListener("DOMContentLoaded",n),E.has(t)&&(t.HTMLElement.prototype.focus=E.get(t).focus,r.removeEventListener("keydown",j,!0),r.removeEventListener("keyup",j,!0),r.removeEventListener("click",B,!0),t.removeEventListener("focus",R,!0),t.removeEventListener("blur",V,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",p,!0),r.removeEventListener("pointermove",p,!0),r.removeEventListener("pointerup",p,!0)):(r.removeEventListener("mousedown",p,!0),r.removeEventListener("mousemove",p,!0),r.removeEventListener("mouseup",p,!0)),E.delete(t))};function he(e){const n=w(e);let t;return n.readyState!=="loading"?k(e):(t=()=>{k(e)},n.addEventListener("DOMContentLoaded",t)),()=>K(e,t)}typeof document<"u"&&he();function O(){return y!=="pointer"}const ge=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function $e(e,n,t){var r;const o=typeof window<"u"?$(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?$(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,c=typeof window<"u"?$(t==null?void 0:t.target).HTMLElement:HTMLElement,a=typeof window<"u"?$(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof o&&!ge.has(t==null||(r=t.target)===null||r===void 0?void 0:r.type)||(t==null?void 0:t.target)instanceof i||(t==null?void 0:t.target)instanceof c&&(t==null?void 0:t.target.isContentEditable),!(e&&n==="keyboard"&&t instanceof a&&!me[t.key])}function xe(e,n,t){k(),l.useEffect(()=>{let r=(o,i)=>{$e(!!(t!=null&&t.isTextInput),o,i)&&e(O())};return _.add(r),()=>{_.delete(r)}},n)}function Ee(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:r,onFocusWithinChange:o}=e,i=l.useRef({isFocusWithin:!1}),c=l.useCallback(f=>{i.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(i.current.isFocusWithin=!1,t&&t(f),o&&o(!1))},[t,o,i]),a=W(c),d=l.useCallback(f=>{!i.current.isFocusWithin&&document.activeElement===f.target&&(r&&r(f),o&&o(!0),i.current.isFocusWithin=!0,a(f))},[r,o,a]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:c}}}let T=!1,L=0;function F(){T=!0,setTimeout(()=>{T=!1},50)}function S(e){e.pointerType==="touch"&&F()}function we(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",S):document.addEventListener("touchend",F),L++,()=>{L--,!(L>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",S):document.removeEventListener("touchend",F))}}function ye(e){let{onHoverStart:n,onHoverChange:t,onHoverEnd:r,isDisabled:o}=e,[i,c]=l.useState(!1),a=l.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;l.useEffect(we,[]);let{hoverProps:d,triggerHoverEnd:f}=l.useMemo(()=>{let b=(u,g)=>{if(a.pointerType=g,o||g==="touch"||a.isHovered||!u.currentTarget.contains(u.target))return;a.isHovered=!0;let P=u.currentTarget;a.target=P,n&&n({type:"hoverstart",target:P,pointerType:g}),t&&t(!0),c(!0)},h=(u,g)=>{if(a.pointerType="",a.target=null,g==="touch"||!a.isHovered)return;a.isHovered=!1;let P=u.currentTarget;r&&r({type:"hoverend",target:P,pointerType:g}),t&&t(!1),c(!1)},m={};return typeof PointerEvent<"u"?(m.onPointerEnter=u=>{T&&u.pointerType==="mouse"||b(u,u.pointerType)},m.onPointerLeave=u=>{!o&&u.currentTarget.contains(u.target)&&h(u,u.pointerType)}):(m.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},m.onMouseEnter=u=>{!a.ignoreEmulatedMouseEvents&&!T&&b(u,"mouse"),a.ignoreEmulatedMouseEvents=!1},m.onMouseLeave=u=>{!o&&u.currentTarget.contains(u.target)&&h(u,"mouse")}),{hoverProps:m,triggerHoverEnd:h}},[n,t,r,o,a]);return l.useEffect(()=>{o&&f({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:d,isHovered:i}}function Pe(e={}){let{autoFocus:n=!1,isTextInput:t,within:r}=e,o=l.useRef({isFocused:!1,isFocusVisible:n||O()}),[i,c]=l.useState(!1),[a,d]=l.useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=l.useCallback(()=>d(o.current.isFocused&&o.current.isFocusVisible),[]),b=l.useCallback(u=>{o.current.isFocused=u,c(u),f()},[f]);xe(u=>{o.current.isFocusVisible=u,f()},[],{isTextInput:t});let{focusProps:h}=pe({isDisabled:r,onFocusChange:b}),{focusWithinProps:m}=Ee({isDisabled:!r,onFocusWithinChange:b});return{isFocused:i,isFocusVisible:a,focusProps:r?m:h}}function je(e){let n=e.width/2,t=e.height/2;return{top:e.clientY-t,right:e.clientX+n,bottom:e.clientY+t,left:e.clientX-n}}function Te(e,n){return!(!e||!n||e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom)}function Le({disabled:e=!1}={}){let n=l.useRef(null),[t,r]=l.useState(!1),o=re(),i=N(()=>{n.current=null,r(!1),o.dispose()}),c=N(a=>{if(o.dispose(),n.current===null){n.current=a.currentTarget,r(!0);{let d=te(a.currentTarget);o.addEventListener(d,"pointerup",i,!1),o.addEventListener(d,"pointermove",f=>{if(n.current){let b=je(f);r(Te(b,n.current.getBoundingClientRect()))}},!1),o.addEventListener(d,"pointercancel",i,!1)}}});return{pressed:t,pressProps:e?{}:{onPointerDown:c,onPointerUp:i,onClick:i}}}let _e="button";function Ce(e,n){var t;let r=ne(),{disabled:o=r||!1,autoFocus:i=!1,...c}=e,{isFocusVisible:a,focusProps:d}=Pe({autoFocus:i}),{isHovered:f,hoverProps:b}=ye({isDisabled:o}),{pressed:h,pressProps:m}=Le({disabled:o}),u=se({ref:n,type:(t=c.type)!=null?t:"button",disabled:o||void 0,autoFocus:i},d,b,m),g=l.useMemo(()=>({disabled:o,hover:f,focus:a,active:h,autofocus:i}),[o,f,a,h,i]);return ie()({ourProps:u,theirProps:c,slot:g,defaultTag:_e,name:"Button"})}let v=oe(Ce);const G=l.createContext(void 0),ke=({children:e})=>{var o;const{auth:n}=H().props,t=((o=n.user)==null?void 0:o.permissions)||[],r=i=>t.includes(i);return s.jsx(G.Provider,{value:{hasPermission:r},children:e})},U=()=>{const e=l.useContext(G);if(!e)throw new Error("usePermissions must be used within a PermissionsProvider");return e},Fe=({renderComponent:e})=>{const{hasPermission:n}=U();return["can_create_companies","can_create_employees","can_create_positions","can_read_employees"].some(o=>n(o))?s.jsxs("div",{className:"dropdown dropdown-end",children:[s.jsx("div",{tabIndex:0,role:"button",className:"btn btn-ghost nav__bar__button",children:"Panel de Administración"}),s.jsxs("ul",{tabIndex:0,className:"menu dropdown-content rounded-box z-[10] mt-4 w-52 p-2 shadow bg-white",children:[n("can_read_users")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>e("Profile"),children:"Perfil"})}),n("can_create_companies")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>e("CreateCompany"),children:"Registrar nueva empresa"})}),n("can_create_positions")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>e("CreatePosition"),children:"Agregar nuevo puesto"})}),n("can_create_employees")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>e("CreateEmployee"),children:"Agregar nuevo empleado"})}),n("can_read_employees")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>e("EmployeeList"),children:"Lista de Empleados"})})]})]}):null},He=()=>{const{hasPermission:e}=U(),{auth:n}=H().props;n.user;const[t,r]=l.useState(null),o=c=>{switch(c){case"Profile":r(s.jsx(Me,{}));break;case"FileManager":r(s.jsx(ee,{}));break;case"EmployeeList":r(s.jsx(J,{}));break;case"CreateEmployee":r(s.jsx(q,{}));break;case"CreateCompany":r(s.jsx(Q,{}));break;case"CreatePosition":r(s.jsx(Z,{}));break;default:r(null)}},i=()=>{X.post("/logout").finally(()=>{window.location.href="/login"})};return s.jsxs(s.Fragment,{children:[s.jsx(z,{title:"Inicio"}),s.jsxs("section",{className:"container mx-auto",children:[s.jsxs("nav",{className:"nav__bar rounded-lg flex items-center justify-between p-4",children:[s.jsxs("div",{className:"lg:hidden dropdown dropdown-bottom",children:[s.jsx("button",{tabIndex:0,className:"nav__bar__button transition-opacity hover:text-black",children:"Menu"}),s.jsxs("ul",{tabIndex:0,className:"menu dropdown-content rounded-box z-[10] mt-4 w-52 p-2 shadow bg-white",children:[e("can_read_users")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>o("Profile"),children:"Perfil"})}),e("can_create_companies")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>o("CreateCompany"),children:"Registrar nueva empresa"})}),e("can_create_positions")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>o("CreatePosition"),children:"Agregar nuevo puesto"})}),e("can_create_employees")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>o("CreateEmployee"),children:"Agregar nuevo empleado"})}),e("can_read_employees")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>o("EmployeeList"),children:"Lista de Empleados"})}),e("can_read_files")&&s.jsx("li",{children:s.jsx(v,{className:"hover:text-black",onClick:()=>o("FileManager"),children:"Explorador de archivos"})})]})]}),s.jsxs("div",{className:"hidden lg:flex space-x-4",children:[e("can_read_files")&&s.jsx(v,{className:"btn btn-ghost nav__bar__button hover:text-black",onClick:()=>o("FileManager"),children:"Explorador de archivos"}),s.jsx(Fe,{renderComponent:o})]}),s.jsxs("div",{children:[s.jsx("button",{className:"nav__bar__button transition-opacity hover:text-black",onClick:()=>{const c=document.getElementById("modal_sesion_close");c==null||c.showModal()},children:"Cerrar sesión"}),s.jsx("dialog",{id:"modal_sesion_close",className:"modal",children:s.jsxs("div",{className:"modal-box",children:[s.jsx("h3",{className:"font-bold text-lg text-center",children:"¿Estás seguro de cerrar sesión?"}),s.jsx("div",{className:"modal-action justify-center",children:s.jsxs("form",{method:"dialog",children:[s.jsx("button",{className:"btn m-3 btn-info",children:"No cerrar sesión"}),s.jsx("button",{type:"button",className:"btn m-3 btn-warning",onClick:i,children:"Sí, cerrar sesión"})]})})]})})]})]}),s.jsx("div",{className:"mt-4",children:t||s.jsx(D,{mustVerifyEmail:!1,status:"",auth:n})})]})]})},Me=()=>{const{auth:e}=H().props;return s.jsx(D,{mustVerifyEmail:!1,status:"",auth:e})},Qe=()=>s.jsx(ke,{children:s.jsx(He,{})});export{Qe as default};
