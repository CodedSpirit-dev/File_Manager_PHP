import{W as g,r as a,b as o,j as s}from"./app-BDY2Wb-P.js";function f(){const{data:t,setData:n,post:c,processing:b,reset:m}=g({name:"",company_id:"",hierarchy_level:""}),[d,u]=a.useState([]),[h,p]=a.useState([]),[r,x]=a.useState({name:""}),[l,_]=a.useState(""),v=()=>{let e={name:""};t.name||(e.name="El nombre del puesto es requerido"),e.name?x(e):c(route("api.positions.store"),{onFinish:()=>{m("name"),_("El puesto ha sido registrado exitosamente."),i()}})},i=()=>{const e=document.getElementById("modal_position_confirm");e==null||e.close()},j=()=>{const e=document.getElementById("modal_position_confirm");e==null||e.showModal()};return a.useEffect(()=>{o.get("api/companies").then(e=>{u(e.data)}).catch(e=>{console.error("Error al cargar las empresas",e)}),o.get("api/hierarchylevels").then(e=>{p(e.data)}).catch(e=>{console.error("Error al cargar los niveles jerárquicos",e)})},[]),s.jsxs("div",{className:"container__25",children:[s.jsxs("form",{onSubmit:e=>e.preventDefault(),children:[s.jsxs("div",{children:[s.jsxs("label",{className:"mt-10 input__label",htmlFor:"company_id",children:["Nombre de la empresa",s.jsxs("select",{id:"company_id",name:"company_id",value:t.company_id,className:"input__data__entry",onChange:e=>n("company_id",e.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Seleccione una empresa"}),d.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsxs("label",{className:"mt-10 input__label",htmlFor:"hierarchy_level",children:["Nivel Jerárquico",s.jsxs("select",{id:"hierarchy_level",name:"hierarchy_level",value:t.hierarchy_level,className:"input__data__entry",onChange:e=>n("hierarchy_level",e.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Seleccione un nivel jerárquico"}),h.map(e=>s.jsx("option",{value:e.level,children:e.name},e.level))]})]}),s.jsxs("label",{className:"mt-10 input__label",htmlFor:"name",children:["Nombre del puesto",s.jsx("input",{id:"name",name:"name",value:t.name,className:"input__data__entry",onChange:e=>n("name",e.target.value),required:!0})]}),r.name&&s.jsx("p",{className:"mt-2 text-red-600",children:r.name})]}),s.jsx("div",{className:"mt-4 flex items-center justify-end",children:s.jsx("button",{className:"btn btn-success",onClick:j,children:"Registrar puesto"})})]}),l&&s.jsxs("div",{role:"alert",className:"alert alert-success mt-4",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:l})]}),s.jsx("dialog",{id:"modal_position_confirm",className:"modal",children:s.jsxs("div",{className:"modal-box",children:[s.jsx("h3",{className:"font-bold text-lg text-center",children:"¿Estás seguro de registrar este puesto?"}),s.jsxs("div",{className:"modal-action justify-center",children:[s.jsx("button",{className:"btn m-3 btn-info",onClick:i,children:"No, cancelar"}),s.jsx("button",{className:"btn m-3 btn-warning",onClick:v,children:"Sí, registrar puesto"})]})]})})]})}export{f as default};
