import{W as x,r as n,b as o,j as e,Y as v}from"./app-DY-Pp5T_.js";function b({}){const{data:s,setData:l,post:m,processing:d,reset:_}=x({first_name:"",last_name_1:"",last_name_2:"",username:"",password:"",hierarchy_level:"",password_confirmation:"",position_id:"",company_id:""}),[j,c]=n.useState([]),[u,p]=n.useState([]),[N,h]=n.useState([]),[t,f]=n.useState({first_name:"",last_name_1:"",last_name_2:"",username:"",position_id:"",company_id:"",hierarchy_level:"",password:"",password_confirmation:""});n.useEffect(()=>{o.get("api/companies").then(a=>{c(a.data)}).catch(a=>{console.error("Error al cargar las empresas",a)}),o.get("api/positions").then(a=>{p(a.data)}).catch(a=>{console.error("Error al cargar los puestos",a)}),o.get("api/hierarchylevels").then(a=>{h(a.data)}).catch(a=>{console.error("Error al cargar los niveles de autorización",a)})},[]);const w=a=>{a.preventDefault();let i={first_name:"",last_name_1:"",last_name_2:"",username:"",company_id:"",position_id:"",hierarchy_level:"",password:"",password_confirmation:""};if(Object.values(i).every(r=>r==="")){const r={...s,first_name:s.first_name.toUpperCase(),last_name_1:s.last_name_1.toUpperCase(),last_name_2:s.last_name_2.toUpperCase(),username:s.username.toUpperCase()};console.log("Data to send: ",r),m(route("admin.employees.store"),{data:r,onFinish:()=>_("first_name","last_name_1","last_name_2","username","password","hierarchy_level","password_confirmation","position_id","company_id")})}else f(i)};return e.jsxs("div",{className:"container__25 w-auto",children:[" ",e.jsx(v,{title:"Registro de nuevos empleados"}),e.jsxs("form",{onSubmit:w,className:"w-full",children:[" ",e.jsx("div",{className:"mt-10 input__label w-full",children:e.jsx("label",{htmlFor:"first_name",className:"w-full",children:e.jsx("input",{placeholder:"Nombre(s)",id:"first_name",name:"first_name",value:s.first_name,className:"input__data__entry w-full outline-none",onChange:a=>l("first_name",a.target.value),required:!0})})}),e.jsxs("div",{className:"mt-4 input__label w-auto",children:[" ",e.jsx("label",{htmlFor:"last_name_1",className:"w-auto",children:e.jsx("input",{placeholder:"Primer apellido",id:"last_name_1",name:"last_name_1",value:s.last_name_1,className:"input__data__entry w-full outline-none",onChange:a=>l("last_name_1",a.target.value),required:!0})})]}),e.jsxs("div",{className:"mt-4 input__label w-full",children:[" ",e.jsx("label",{htmlFor:"last_name_2",className:"w-full",children:e.jsx("input",{placeholder:"Segundo apellido",id:"last_name_2",name:"last_name_2",value:s.last_name_2,className:"input__data__entry w-full outline-none",onChange:a=>l("last_name_2",a.target.value),required:!0})}),t.last_name_2&&e.jsx("p",{className:"mt-2 text-red-600",children:t.last_name_2})]}),e.jsxs("div",{className:"mt-4 input__label w-full",children:[" ",e.jsx("label",{htmlFor:"username",className:"w-full",children:e.jsx("input",{placeholder:"Nombre de usuario",id:"username",name:"username",value:s.username,className:"input__data__entry w-full outline-none",maxLength:18,onChange:a=>l("username",a.target.value),required:!0})}),t.username&&e.jsx("p",{className:"mt-2 text-red-600",children:t.username})]}),e.jsxs("div",{className:"mt-4 w-full",children:[" ",e.jsx("label",{htmlFor:"position_id",className:"form-control w-full max-w-xs",children:e.jsxs("select",{id:"position_id",name:"position_id",value:s.position_id,className:"select select-bordered bg-white w-full outline-none",onChange:a=>l("position_id",a.target.value),required:!0,children:[e.jsx("option",{disabled:!0,value:"",children:"Seleccione un puesto"}),u.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),t.position_id&&e.jsx("p",{className:"mt-2 text-red-600",children:t.position_id})]}),e.jsxs("div",{className:"mt-4 input__label w-full",children:[" ",e.jsx("label",{htmlFor:"password",className:"w-full",children:e.jsx("input",{placeholder:"Contraseña",id:"password",type:"password",name:"password",value:s.password,className:"input__data__entry w-full outline-none",autoComplete:"new-password",onChange:a=>l("password",a.target.value),required:!0})}),t.password&&e.jsx("p",{className:"mt-2 text-red-600",children:t.password})]}),e.jsxs("div",{className:"mt-4 input__label w-full",children:[" ",e.jsx("label",{htmlFor:"password_confirmation",className:"w-full",children:e.jsx("input",{placeholder:"Confirmar contraseña",id:"password_confirmation",type:"password",name:"password_confirmation",value:s.password_confirmation,className:"input__data__entry w-full outline-none",autoComplete:"new-password",onChange:a=>l("password_confirmation",a.target.value),required:!0})}),t.password_confirmation&&e.jsx("p",{className:"mt-2 text-red-600",children:t.password_confirmation})]}),e.jsx("div",{className:"mt-4 flex items-center justify-end",children:e.jsx("button",{className:"btn btn-success",disabled:d,children:"Registrar empleado"})})]})]})}export{b as default};
