import{r as a,b as l,j as e}from"./app-1oKc2Cmq.js";import _ from"./EditEmployee-C4ErE-yy.js";import"./index.esm-COIu_2hA.js";const C=()=>{const[h,d]=a.useState([]),[c,u]=a.useState([]),[m,j]=a.useState([]),[g,o]=a.useState(!0),[n,y]=a.useState(null),[p,b]=a.useState(null),[f,x]=a.useState(!1),E=s=>{b(s),x(!0)};a.useEffect(()=>{o(!0),Promise.all([l.get("admin/employees"),l.get("api/positions"),l.get("api/companies")]).then(([s,t,r])=>{d(s.data),u(t.data),j(r.data),o(!1)}).catch(s=>{y("Error al cargar los datos"),o(!1)})},[]);const N=()=>{l.get("admin/employees").then(s=>d(s.data)).catch(s=>console.error("Error al actualizar la lista de empleados",s))};return g?e.jsx("span",{className:"flex my-auto mx-auto bg-primary loading loading-dots loading-lg w-2/4 h-screen"}):n?(console.log(n),e.jsx("div",{children:n})):e.jsxs("div",{className:"container__75__table",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Lista de Empleados"}),e.jsxs("div",{className:"overFlow",children:[" ",e.jsxs("table",{className:"employee__table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-xl",children:[e.jsx("th",{className:"px-4 py-2 w-2",children:"Nombre"}),e.jsx("th",{className:"px-4 py-2 w-2",children:"Fecha de Registro"}),e.jsx("th",{className:"px-4 py-2 w-2",children:"Puesto"}),e.jsx("th",{className:"px-4 py-2 w-2",children:"Acciones"})]})}),e.jsx("tbody",{children:h.map(s=>{const t=c.find(i=>i.id===s.position_id),r=t?m.find(i=>i.id===t.company_id):null;return e.jsxs("tr",{className:"hover",children:[e.jsx("td",{className:"border px-4 py-2 name-cell",children:s.first_name+" "+s.last_name_1}),e.jsx("td",{className:"border px-4 py-2",children:new Date(s.registered_at).toLocaleDateString()}),e.jsxs("td",{className:"border px-4 py-2",children:[t==null?void 0:t.name,e.jsx("br",{}),e.jsx("span",{className:"badge bg-primary text-white ",children:r==null?void 0:r.name})]}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("button",{onClick:()=>E(s),children:"Editar"})})]},s.id)})})]}),f&&p&&e.jsx(_,{employee:p,positions:c,companies:m,onClose:()=>{x(!1),N()}})]})]})};export{C as default};
